/*! ng-i18next - 1.0.4 - 2017-05-25 - Copyright (c) 2017 Andre Meyering; Licensed MIT*/!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("angular")):"function"==typeof define&&define.amd?define(["angular"],i):t.ngI18next=i(t.angular)}(this,function(t){"use strict";var i=function(){function i(i){var n=this;this.$interpolate=i,this.restrict="A",this.scope=!1,this.controller="NgI18nextController",this.link=function(i,e,s,o){function r(i){if(t.isDefined(i)){if(""===(h=i.replace(/^\s+|\s+$/g,"")))return a();o.localize(h)}}function a(){if(!c){var t=p.$interpolate(e.html());i.$watch(t,r),c=!0}}var p=n,h="",c=!1;h=s.ngI18next.replace(/^\s+|\s+$/g,""),h.indexOf("__once__")<0?s.$observe("ngI18next",r):(h=h.split("__once__").join(""),o.localize(h,!0)),i.$on("i18nextLanguageChange",function(){o.localize(h)})}}return i.factory=function(){var t=function(t){return new i(t)};return t.$inject=["$interpolate"],t},i}(),n=function(){function t(t){var i=this;this.$compile=t,this.restrict="A",this.scope=!1,this.link=function(t,n,e){var s=n.clone();s.attr("ng-i18next","__once__"+e.boI18next),s.removeAttr("bo-i18next"),n.replaceWith(i.$compile(s)(t))}}return t.factory=function(){var i=function(i){return new t(i)};return i.$inject=["$compile"],i},t}(),e=function(){function i(t,i,n,e,s,o,r){this.$scope=t,this.$element=i,this.$compile=n,this.$parse=e,this.$interpolate=s,this.$sanitize=o,this.$i18next=r}return i.prototype.localize=function(t,i){for(var n=t.split(";"),e=0;e<n.length;++e)""!==(t=n[e].trim())&&this.parse(t,i)},i.prototype.parse=function(t,i){var n=this,e=this.parseKey(t);this.argsUnregister&&this.argsUnregister(),this.stringUnregister&&this.stringUnregister(),i||(this.argsUnregister=this.$scope.$watch(function(){return e.i18nOptions(n.$scope)},function(){return n.render(e,i)},!0)),this.render(e,i)},i.prototype.parseKey=function(t){var i,n={attr:"text"},e="{}";return t=t.trim(),0===t.indexOf("[")&&(i=t.split("]"),n=this.parseOptions(i.shift().substr(1).trim()),t=i.join("]")),0===t.indexOf("(")&&t.indexOf(")")>=0&&(i=t.split(")"),t=i.pop().trim(),e=i.join(")").substr(1).trim()),{key:t,options:n,i18nOptions:this.$parse(e)}},i.prototype.parseOptions=function(t){for(var i={attr:"text"},n=t.split(":"),e=0;e<n.length;++e)"i18next"===n[e]?i[n[e]]=!0:i.attr=n[e];return i},i.prototype.render=function(i,n){if(t.isDefined(this)&&t.isDefined(this.$scope)){var e=i.i18nOptions(this.$scope);e.sprintf&&(e.postProcess="sprintf"),"html"===i.options.attr&&t.forEach(e,function(t,i){var n=void 0,s=this.$sanitize(t),o=Number(t);n="number"!=typeof o||isNaN(o)?s:o,e[i]=n},this);var s=this.$i18next.t(i.key,e);if(t.isDefined(s)){if("html"===i.options.attr)return this.$element.empty().append(s),void this.$compile(this.$element.contents())(this.$scope);this.stringUnregister&&this.stringUnregister();var o=this.$element.text.bind(this.$element);"text"!==i.options.attr&&(o=this.$element.attr.bind(this.$element,i.options.attr));var r=this.$interpolate(s);n||(this.stringUnregister=this.$scope.$watch(r,o)),o(r(this.$scope))}}},i.$inject=["$scope","$element","$compile","$parse","$interpolate","$sanitize","$i18next"],i}(),s=function(){function i(){}return i.factory=function(){var i=function(i){function n(n,e){var s=t.isDefined(e)?e:{};return i.t(n,s)}return n.$stateful=!0,n};return i.$inject=["$i18next"],i},i}(),o=function(){function i(t,i){this.$rootScope=t,this.options={},this.tOptions={},this.modules=[],this.localesLoaded=!1,this.translations={},this.i18n=i18next,this.tOptions=i,this.initializeI18next()}return i.prototype.initializeI18next=function(){var t=this;if(i18next)this.i18n=i18next,this.options=i18next.options;else{var i=new Error("[ng-i18next] Can't find i18next and/or i18next options! Please refer to i18next.");this.handleError(i)}i18next.on("initialized",function(i){t.options=i,t.$rootScope.$broadcast("i18nextLanguageChange",t.options.lng)})},i.prototype.t=function(i,n){var e,s,o=t.isDefined(n),r=o&&t.isDefined(n.ns),a=t.isDefined(this.options)&&t.isDefined(this.options.ns),p=this.options;return t.isUndefined(r)&&a&&(p=t.extend({},this.options),p.ns=p.defaultNS),e=o?n:this.tOptions,s=e.lng,this.translate(i,e,o),t.isDefined(s)?this.translations[s][i]:this.translations.auto[i]},i.prototype.changeLanguage=function(t){var i=this;this.options.lng!==t&&this.i18n.language!==t&&(this.options.lng=t,this.i18n.changeLanguage(t,function(t,n){i.$rootScope.$broadcast("i18nextLanguageChange",i.i18n.language)}))},i.prototype.changeOptions=function(i){t.isDefined(i)&&(this.options=i)},i.prototype.translate=function(i,n,e){var s=t.isDefined(n)&&e?n:this.tOptions,o=s.lng||"auto";t.isUndefined(this.translations[o])&&(this.translations[o]={}),t.isUndefined(this.i18n)?this.translations[o][i]=t.isDefined(s.defaultValue)?s.defaultValue:i:(t.isUndefined(this.translations[o][i])||e)&&(this.translations[o][i]=this.i18n.t(i,s))},i.prototype.handleError=function(i){var n=t.isDefined(i.message)?i.message:i[0];console.log(n)},i}(),r=function(){function t(){var t=this;this.translationOptions={},this.$get=function(i){if(i18next)return new o(i,t.translationOptions);throw"i18next is not loaded"},this.$get.$inject=["$rootScope"]}return t}();t.module("jm.i18next",["ng","ngSanitize"]).provider("$i18next",r).directive("ngI18next",i.factory()).directive("boI18next",n.factory()).controller("NgI18nextController",e).filter("i18next",s.factory());return"jm.i18next"});